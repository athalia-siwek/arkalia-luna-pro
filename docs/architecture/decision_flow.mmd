# Flux Décisionnel ZeroIA - Arkalia-LUNA

```mermaid
flowchart TD
    A[🔄 Context Input] --> B{📊 Load Context}
    B --> C[🧠 ZeroIA Reasoning]
    C --> D{🔍 CPU Analysis}
    C --> E{💾 RAM Analysis}
    C --> F{⚡ System Health}

    D --> |CPU > 80%| G[🚨 High Load Detected]
    D --> |CPU 60-80%| H[⚠️ Medium Load]
    D --> |CPU < 60%| I[✅ Normal Load]

    E --> |RAM > 85%| J[💥 Memory Critical]
    E --> |RAM 70-85%| K[⚠️ Memory Warning]
    E --> |RAM < 70%| L[✅ Memory OK]

    F --> M{🔗 Reflexia Check}
    M --> |Consistent| N[🎯 Decision Confidence HIGH]
    M --> |Inconsistent| O[⚠️ Decision Confidence LOW]

    G --> P[🛑 Emergency Shutdown]
    H --> Q[📉 Reduce Load]
    I --> R[👁️ Monitor]

    J --> P
    K --> Q
    L --> R

    P --> S[💾 Persist State]
    Q --> S
    R --> S

    S --> T[📈 Update Dashboard]
    T --> U[🔄 Loop Continue]

    N --> V[🧠 Confidence Score: 0.8-1.0]
    O --> W[🧠 Confidence Score: 0.3-0.7]

    V --> X[✅ Execute Decision]
    W --> Y[⚠️ Flag for Review]

    X --> S
    Y --> S

    subgraph "🔒 Security Layer"
        Z1[🛡️ Model Integrity Check]
        Z2[🔍 Poisoning Detection]
        Z3[📝 Audit Log]
    end

    C --> Z1
    Z1 --> Z2
    Z2 --> Z3
    Z3 --> D

    subgraph "📊 Observability"
        M1[📉 Prometheus Metrics]
        M2[📈 Grafana Dashboard]
        M3[🚨 AlertManager]
    end

    T --> M1
    M1 --> M2
    M2 --> M3
```

## Légende des Décisions

| Décision | Déclencheur | Seuils | Action |
|----------|-------------|---------|---------|
| `emergency_shutdown` | CPU > 80% OU RAM > 85% | Critique | Arrêt services non-essentiels |
| `reduce_load` | CPU 60-80% OU RAM 70-85% | Warning | Limitation connexions |
| `monitor` | CPU < 60% ET RAM < 70% | Normal | Surveillance continue |

## Facteurs de Confiance

- **Cohérence système** : CPU/RAM/Disk corrélés
- **Historique ReflexIA** : Décisions passées similaires
- **Temps de réponse** : < 500ms = confiance élevée
- **Contexte** : Similarité avec patterns connus
- **Taux d'erreur** : Historique de succès/échecs
